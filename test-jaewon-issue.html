<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jaewon í”Œë ˆì´ì–´ ë¬¸ì œ ì¬í˜„</title>
    <style>
        body { font-family: monospace; background: #1a1a1a; color: white; padding: 20px; }
        .test-case { background: #333; border-radius: 8px; padding: 15px; margin: 20px 0; }
        h3 { color: #fbbf24; }
        table { border-collapse: collapse; width: 100%; margin: 10px 0; }
        td, th { border: 1px solid #555; padding: 8px; text-align: left; }
        th { background-color: #444; color: #fbbf24; }
        .error { background-color: #4d1a1a; }
        .expected { background-color: #1a4d1a; }
        .column-header { background-color: #2d3748; font-weight: bold; }
        pre { background: #222; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” Jaewon í”Œë ˆì´ì–´ ë°ì´í„° ë¬¸ì œ ì¬í˜„</h1>
    
    <div class="test-case">
        <h3>ì‚¬ìš©ìê°€ ë³´ê³ í•œ ë¬¸ì œ</h3>
        <p>ì˜ˆìƒ: 4 PLAYER Jaewon 1 0 134000 994000 3h 3d</p>
        <p>ì‹¤ì œ: 4 PLAYER Jaewon 1 0 0 134000 994000 3h 3d (ì¹¼ëŸ¼ì´ í•˜ë‚˜ ë” ë§ìŒ)</p>
    </div>
    
    <div class="test-case">
        <h3>ê°€ëŠ¥í•œ ì›ì¸ ë¶„ì„</h3>
        <div id="analysis"></div>
    </div>
    
    <script>
        function unformatNumber(str) {
            if (!str) return '';
            return String(str).replace(/,/g, '');
        }
        
        function analyze() {
            let html = '<h4>1. ì›ë³¸ ë°ì´í„° êµ¬ì¡° í™•ì¸</h4>';
            
            // ì‚¬ìš©ìê°€ ì–¸ê¸‰í•œ Jaewonì˜ ë°ì´í„°
            const jaewonData = {
                name: 'Jaewon',
                initialChips: '134,000',  // ì‹œì‘ì¹©
                chips: '994,000',         // ì¢…ë£Œì¹©
                hand: ['3h', '3d']
            };
            
            html += '<pre>';
            html += 'Jaewon ì›ë³¸ ë°ì´í„°:\n';
            html += JSON.stringify(jaewonData, null, 2);
            html += '</pre>';
            
            // ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ë“¤
            html += '<h4>2. ê°€ëŠ¥í•œ ì‹œë‚˜ë¦¬ì˜¤ë“¤</h4>';
            
            // ì‹œë‚˜ë¦¬ì˜¤ 1: initialChipsê°€ undefinedì¸ ê²½ìš°
            html += '<div style="background: #222; padding: 10px; margin: 10px 0;">';
            html += '<h5>ì‹œë‚˜ë¦¬ì˜¤ 1: initialChipsê°€ undefined</h5>';
            let scenario1 = {
                name: 'Jaewon',
                initialChips: undefined,
                chips: '994,000',
                hand: ['3h', '3d']
            };
            
            let initialChips1 = parseInt(unformatNumber(scenario1.initialChips) || 0, 10);
            let finalChips1 = parseInt(unformatNumber(scenario1.chips) || 0, 10);
            
            if(scenario1.initialChips === undefined) {
                initialChips1 = finalChips1;
            }
            
            const playerRow1 = ['PLAYER', 'Jaewon', 1, 0, initialChips1, finalChips1, '3h 3d'];
            html += `<p>ìƒì„±ëœ ë°°ì—´: [${playerRow1.join(', ')}]</p>`;
            html += `<p>ê²°ê³¼: F=${initialChips1}, G=${finalChips1}</p>`;
            html += '</div>';
            
            // ì‹œë‚˜ë¦¬ì˜¤ 2: chipsì™€ initialChipsê°€ ë°”ë€ ê²½ìš°
            html += '<div style="background: #222; padding: 10px; margin: 10px 0;">';
            html += '<h5>ì‹œë‚˜ë¦¬ì˜¤ 2: chipsì™€ initialChipsê°€ ë°”ë€ ê²½ìš°</h5>';
            let scenario2 = {
                name: 'Jaewon',
                initialChips: '994,000',  // ë°”ë€œ!
                chips: '134,000',          // ë°”ë€œ!
                hand: ['3h', '3d']
            };
            
            let initialChips2 = parseInt(unformatNumber(scenario2.initialChips) || 0, 10);
            let finalChips2 = parseInt(unformatNumber(scenario2.chips) || 0, 10);
            
            const playerRow2 = ['PLAYER', 'Jaewon', 1, 0, initialChips2, finalChips2, '3h 3d'];
            html += `<p>ìƒì„±ëœ ë°°ì—´: [${playerRow2.join(', ')}]</p>`;
            html += `<p>ê²°ê³¼: F=${initialChips2}, G=${finalChips2}</p>`;
            html += '</div>';
            
            // ì‹œë‚˜ë¦¬ì˜¤ 3: ì¶”ê°€ í•„ë“œê°€ ìˆëŠ” ê²½ìš°
            html += '<div style="background: #222; padding: 10px; margin: 10px 0;">';
            html += '<h5>ì‹œë‚˜ë¦¬ì˜¤ 3: í”Œë ˆì´ì–´ ê°ì²´ì— ì¶”ê°€ í•„ë“œ</h5>';
            let scenario3 = {
                name: 'Jaewon',
                initialChips: '134,000',
                chips: '994,000',
                hand: ['3h', '3d'],
                extraField: 0  // ì¶”ê°€ í•„ë“œ
            };
            
            // ë§Œì•½ ì‹¤ìˆ˜ë¡œ extraFieldë¥¼ í¬í•¨ì‹œí‚¨ë‹¤ë©´
            const playerRow3Wrong = ['PLAYER', 'Jaewon', 1, 0, scenario3.extraField, 134000, 994000, '3h 3d'];
            html += `<p>ì˜ëª»ëœ ë°°ì—´: [${playerRow3Wrong.join(', ')}]</p>`;
            html += `<p>ì´ ê²½ìš° 0ì´ Eì—´ì—, 134000ì´ Fì—´ì—, 994000ì´ Gì—´ì—, í•¸ë“œê°€ Hì—´ì—</p>`;
            html += '<p style="color: #ef4444;">âŒ ì´ê²ƒì´ ì‚¬ìš©ìê°€ ë³´ê³ í•œ ë¬¸ì œì™€ ì¼ì¹˜!</p>';
            html += '</div>';
            
            // ê²°ë¡ 
            html += '<h4>3. ê²°ë¡ </h4>';
            html += '<div style="background: #1a4d1a; padding: 10px; border-radius: 4px;">';
            html += '<p>ë¬¸ì œ ì›ì¸: playerRow ë°°ì—´ ìƒì„± ì‹œ ì˜ë„ì¹˜ ì•Šì€ ì¶”ê°€ í•„ë“œê°€ í¬í•¨ë  ê°€ëŠ¥ì„±</p>';
            html += '<p>í•´ê²°ì±…: playerRow ë°°ì—´ì´ ì •í™•íˆ 7ê°œ ìš”ì†Œë§Œ í¬í•¨í•˜ë„ë¡ í™•ì¸</p>';
            html += '<p>í˜„ì¬ ì½”ë“œëŠ” ì˜¬ë°”ë¥´ê²Œ ì‘ì„±ë˜ì–´ ìˆìœ¼ë‚˜, ì‹¤í–‰ ì‹œ ë°ì´í„° ìƒíƒœë¥¼ í™•ì¸ í•„ìš”</p>';
            html += '</div>';
            
            document.getElementById('analysis').innerHTML = html;
        }
        
        window.onload = analyze;
    </script>
</body>
</html>