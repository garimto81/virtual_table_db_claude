<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì œ ìƒì„± í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: monospace; background: #1a1a1a; color: white; padding: 20px; }
        .test-case { background: #333; border-radius: 8px; padding: 15px; margin: 20px 0; }
        h3 { color: #fbbf24; }
        table { border-collapse: collapse; width: 100%; margin: 10px 0; }
        td, th { border: 1px solid #555; padding: 8px; text-align: left; }
        th { background-color: #444; color: #fbbf24; }
        .column-header { background-color: #2d3748; font-weight: bold; }
        button { background: #4b5563; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #6b7280; }
        pre { background: #222; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ¯ ì‹¤ì œ generateRows_v46 í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-case">
        <h3>ì‹¤ì œ ìƒì„± í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testActualGeneration()">ì‹¤ì œ ìƒì„± í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="output"></div>
    </div>
    
    <button onclick="location.href='index.html'">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    
    <script>
        function unformatNumber(str) {
            if (!str) return '';
            return String(str).replace(/,/g, '');
        }
        
        function testActualGeneration() {
            const output = document.getElementById('output');
            
            // generateRows_v46 ì¼ë¶€ë¥¼ ì‹œë®¬ë ˆì´ì…˜
            const out = []; 
            let no = 1;
            const push = (arr) => { 
                const a = [no, ...arr]; 
                while(a.length < 18) a.push(''); 
                out.push(a); 
                no++; 
            };
            
            // í—¤ë”ì™€ í•¸ë“œ ì •ë³´ ì¶”ê°€ (ì‹¤ì œë¡œëŠ” 3í–‰ê¹Œì§€ ì°¨ì§€)
            push(['HEADER', 'INFO', 'HERE']);
            push(['MORE', 'HEADER', 'DATA']);
            push(['HAND', 'DATA', 'HERE']);
            
            // ì´ì œ noëŠ” 4ê°€ ë¨
            console.log('í˜„ì¬ í–‰ ë²ˆí˜¸:', no); // 4
            
            // í…ŒìŠ¤íŠ¸ í”Œë ˆì´ì–´ ë°ì´í„°
            const testPlayers = [
                { name: 'LEMMENS', seat: 1, initialChips: '575,000', chips: '0', hand: ['7h', '7d'] },
                { name: 'CALONGE', seat: 2, initialChips: '998,000', chips: '358,000', hand: ['Qh', 'Jh'] }
            ];
            
            // PLAYERS ìƒì„± (ì‹¤ì œ ì½”ë“œì™€ ë™ì¼)
            const players = testPlayers.map((p, i) => ({...p, seat: i + 1}));
            
            players.forEach(p => {
                let initialChips = parseInt(unformatNumber(p.initialChips) || 0, 10);
                let finalChips = parseInt(unformatNumber(p.chips) || 0, 10);
                
                // ì‹¤ì œ ì½”ë“œì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ìƒì„±
                const playerRow = ['PLAYER', p.name, p.seat, 0, initialChips, finalChips, p.hand?.length ? p.hand.join(' ') : ''];
                
                console.log(`ìƒì„±ëœ playerRow:`, playerRow);
                console.log(`playerRow ê¸¸ì´: ${playerRow.length}`);
                
                // push ì‹¤í–‰
                const beforePushNo = no;
                push(playerRow);
                const afterPushRow = out[out.length - 1];
                
                console.log(`push ì „ í–‰ë²ˆí˜¸: ${beforePushNo}`);
                console.log(`push í›„ ì‹¤ì œ í–‰:`, afterPushRow);
            });
            
            // ê²°ê³¼ í…Œì´ë¸” ìƒì„±
            let html = '<h4>ìƒì„±ëœ ë°ì´í„°:</h4>';
            html += '<table>';
            html += '<tr class="column-header">';
            for(let i = 0; i < 18; i++) {
                html += `<th>${String.fromCharCode(65 + i)}</th>`;
            }
            html += '</tr>';
            
            out.forEach((row, idx) => {
                if(row[1] === 'PLAYER') {
                    html += '<tr style="background: #1a4d1a;">';
                } else {
                    html += '<tr>';
                }
                row.forEach((cell, i) => {
                    html += `<td>${cell}</td>`;
                });
                html += '</tr>';
            });
            html += '</table>';
            
            // PLAYER í–‰ ë¶„ì„
            html += '<h4>PLAYER í–‰ ë¶„ì„:</h4>';
            const playerRows = out.filter(row => row[1] === 'PLAYER');
            
            playerRows.forEach(row => {
                html += '<div style="background: #222; padding: 10px; margin: 10px 0; border-radius: 4px;">';
                html += `<p><strong>${row[2]}ì˜ ë°ì´í„°:</strong></p>`;
                html += `<p>Aì—´ (í–‰ë²ˆí˜¸): ${row[0]}</p>`;
                html += `<p>Bì—´ (PLAYER): ${row[1]}</p>`;
                html += `<p>Cì—´ (ì´ë¦„): ${row[2]}</p>`;
                html += `<p>Dì—´ (ì¢Œì„): ${row[3]}</p>`;
                html += `<p>Eì—´ (0): ${row[4]}</p>`;
                html += `<p>Fì—´ (ì‹œì‘ì¹©): ${row[5]}</p>`;
                html += `<p>Gì—´ (ì¢…ë£Œì¹©): ${row[6]}</p>`;
                html += `<p>Hì—´ (í•¸ë“œ): ${row[7]}</p>`;
                
                // ì˜¬ë°”ë¥¸ì§€ í™•ì¸
                if(row[2] === 'LEMMENS') {
                    if(row[5] === 575000 && row[6] === 0) {
                        html += '<p style="color: #10b981;">âœ… LEMMENS ë°ì´í„° ì •í™•!</p>';
                    } else {
                        html += `<p style="color: #ef4444;">âŒ LEMMENS ë°ì´í„° ì˜¤ë¥˜: F=${row[5]} (ì˜ˆìƒ: 575000), G=${row[6]} (ì˜ˆìƒ: 0)</p>`;
                    }
                }
                if(row[2] === 'CALONGE') {
                    if(row[5] === 998000 && row[6] === 358000) {
                        html += '<p style="color: #10b981;">âœ… CALONGE ë°ì´í„° ì •í™•!</p>';
                    } else {
                        html += `<p style="color: #ef4444;">âŒ CALONGE ë°ì´í„° ì˜¤ë¥˜: F=${row[5]} (ì˜ˆìƒ: 998000), G=${row[6]} (ì˜ˆìƒ: 358000)</p>`;
                    }
                }
                html += '</div>';
            });
            
            output.innerHTML = html;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.onload = testActualGeneration;
    </script>
</body>
</html>