<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
  <title>Phase 2 ê²€ì¦ - ì¦‰ì‹œ ì‹¤í–‰ & ë”ë¸”íƒ­</title>
  <script src="https://cdn-tailwindcss.vercel.app/"></script>
  <script src="action-history.js"></script>
  <script src="double-tap-handler.js"></script>
  <script src="batch-processor.js"></script>
  <style>
    .snackbar {
      position: fixed;
      bottom: -60px;
      left: 10px;
      right: 10px;
      background: #333;
      color: white;
      padding: 12px;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: bottom 0.2s ease-out;
      z-index: 10000;
      font-size: 14px;
      max-width: 500px;
      margin: 0 auto;
    }
    .snackbar.show { bottom: 10px; }
    .snackbar-undo-btn {
      background: transparent;
      border: 1px solid white;
      color: white;
      padding: 4px 12px;
      border-radius: 3px;
      font-size: 12px;
      margin-left: 10px;
      cursor: pointer;
    }
    .snackbar-info { background: #2563eb; }
    .snackbar-error { background: #dc2626; }
    .snackbar-success { background: #16a34a; }
    .snackbar-warning { background: #f59e0b; }

    .double-tap-warning {
      animation: pulse 0.5s ease-in-out infinite;
      background: #f59e0b !important;
    }
    .danger-critical { background: #dc2626 !important; color: white !important; }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    .pass { color: #10b981; }
    .fail { color: #ef4444; }
  </style>
</head>
<body class="bg-gray-900 text-white p-4">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">ğŸ“‹ Phase 2 Quality Gate ê²€ì¦</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Phase 2 ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
      <div class="bg-gray-800 p-4 rounded-lg">
        <h2 class="text-xl font-bold mb-4">âœ… Phase 2 ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
        <div class="space-y-2 text-sm">
          <div id="check-immediate-delete" class="flex items-center gap-2">
            <span id="check-immediate-delete-icon">â³</span>
            <span>í”Œë ˆì´ì–´ ì¦‰ì‹œ ì‚­ì œ</span>
          </div>
          <div id="check-batch-transaction" class="flex items-center gap-2">
            <span id="check-batch-transaction-icon">â³</span>
            <span>íŠ¸ëœì­ì…˜ ì¼ê´„ ì²˜ë¦¬</span>
          </div>
          <div id="check-double-tap" class="flex items-center gap-2">
            <span id="check-double-tap-icon">â³</span>
            <span>ë”ë¸”íƒ­ ìœ„í—˜ ì‘ì—…</span>
          </div>
          <div id="check-api-batch" class="flex items-center gap-2">
            <span id="check-api-batch-icon">â³</span>
            <span>API ë°°ì¹˜ ìµœì í™”</span>
          </div>
          <div id="check-timer-conflict" class="flex items-center gap-2">
            <span id="check-timer-conflict-icon">â³</span>
            <span>íƒ€ì´ë¨¸ ì¶©ëŒ ë°©ì§€</span>
          </div>
          <div id="check-rollback" class="flex items-center gap-2">
            <span id="check-rollback-icon">â³</span>
            <span>ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°±</span>
          </div>
          <div id="check-phase1-compat" class="flex items-center gap-2">
            <span id="check-phase1-compat-icon">â³</span>
            <span>Phase 1 í˜¸í™˜ì„±</span>
          </div>
        </div>
      </div>

      <!-- Quality Gate ì¸¡ì • -->
      <div class="bg-gray-800 p-4 rounded-lg">
        <h2 class="text-xl font-bold mb-4">ğŸš¦ Phase 2 Quality Gate</h2>
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-gray-600">
              <th class="text-left py-2">ê²€ì¦ í•­ëª©</th>
              <th class="text-center">ëª©í‘œ</th>
              <th class="text-center">ì¸¡ì •ê°’</th>
              <th class="text-center">ê²°ê³¼</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="py-2">ë‹¨ì¼ ì‚­ì œ</td>
              <td class="text-center">&lt; 100ms</td>
              <td class="text-center" id="single-delete-time">-</td>
              <td class="text-center" id="single-delete-result">â³</td>
            </tr>
            <tr>
              <td class="py-2">10ëª… ì¼ê´„</td>
              <td class="text-center">&lt; 500ms</td>
              <td class="text-center" id="batch-time">-</td>
              <td class="text-center" id="batch-result">â³</td>
            </tr>
            <tr>
              <td class="py-2">ë”ë¸”íƒ­ íƒ€ì´ë¨¸</td>
              <td class="text-center">2ì´ˆ</td>
              <td class="text-center" id="double-tap-time">-</td>
              <td class="text-center" id="double-tap-result">â³</td>
            </tr>
            <tr>
              <td class="py-2">ë¡¤ë°± ì„±ê³µë¥ </td>
              <td class="text-center">100%</td>
              <td class="text-center" id="rollback-rate">-</td>
              <td class="text-center" id="rollback-result">â³</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ -->
      <div class="bg-gray-800 p-4 rounded-lg">
        <h2 class="text-xl font-bold mb-4">ğŸ§ª ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h2>
        <div class="space-y-3">
          <button onclick="testImmediateDeletion()" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">
            ğŸ—‘ï¸ ì¦‰ì‹œ ì‚­ì œ í…ŒìŠ¤íŠ¸
          </button>
          <button onclick="testBatchProcessing()" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded">
            ğŸ“¦ ì¼ê´„ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ (10ëª…)
          </button>
          <button onclick="testDoubleTap()" class="w-full bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded">
            ğŸ‘†ğŸ‘† ë”ë¸”íƒ­ í…ŒìŠ¤íŠ¸
          </button>
          <button onclick="testRollback()" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded">
            ğŸ”„ ë¡¤ë°± í…ŒìŠ¤íŠ¸
          </button>
          <button id="danger-button" class="w-full bg-red-600 hover:bg-red-700 px-4 py-2 rounded">
            âš ï¸ ìœ„í—˜ ì‘ì—… (ë”ë¸”íƒ­ í•„ìš”)
          </button>
        </div>
      </div>

      <!-- ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ -->
      <div class="bg-gray-800 p-4 rounded-lg">
        <h2 class="text-xl font-bold mb-4">ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸</h2>
        <div class="space-y-3">
          <button onclick="scenarioConsecutiveDelete()" class="w-full bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded text-sm">
            ì—°ì† 5ëª… ì‚­ì œ â†’ ì‹¤í–‰ì·¨ì†Œ
          </button>
          <button onclick="scenarioBatchFailure()" class="w-full bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded text-sm">
            ì¼ê´„ ì‘ì—… ì‹¤íŒ¨ â†’ ë¡¤ë°±
          </button>
          <button onclick="scenarioDoubleTapCancel()" class="w-full bg-pink-600 hover:bg-pink-700 px-4 py-2 rounded text-sm">
            ë”ë¸”íƒ­ 1íšŒë§Œ â†’ ì·¨ì†Œ
          </button>
          <button onclick="runFullScenario()" class="w-full bg-cyan-600 hover:bg-cyan-700 px-4 py-2 rounded text-sm">
            ğŸš€ ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰
          </button>
        </div>
      </div>
    </div>

    <!-- í…ŒìŠ¤íŠ¸ ë¡œê·¸ -->
    <div class="mt-4 bg-gray-800 p-4 rounded-lg">
      <h2 class="text-xl font-bold mb-4">ğŸ“Š í…ŒìŠ¤íŠ¸ ë¡œê·¸</h2>
      <div id="test-log" class="space-y-1 text-xs font-mono h-64 overflow-y-auto bg-gray-900 p-2 rounded">
        <div class="text-gray-400">Phase 2 í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ...</div>
      </div>
    </div>

    <!-- ìµœì¢… ê²°ê³¼ -->
    <div class="mt-4 bg-gray-800 p-6 rounded-lg">
      <h2 class="text-2xl font-bold mb-4">ğŸ“ˆ Phase 2 ê²€ì¦ ê²°ê³¼</h2>
      <div id="final-result" class="text-lg">
        <span class="text-yellow-400">í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”...</span>
      </div>
      <div id="performance-summary" class="mt-4 grid grid-cols-2 gap-4 text-sm"></div>
    </div>
  </div>

  <!-- ìŠ¤ë‚µë°” -->
  <div id="snackbar" class="snackbar"></div>

  <script>
    // Mock ë°ì´í„°
    let testPlayers = [];
    let testResults = {
      deleteTimes: [],
      batchTimes: [],
      rollbackTests: 0,
      rollbackSuccess: 0,
      doubleTapTests: 0
    };

    // Mock tableManager
    window.tableManager = {
      deletePlayer: async (name) => {
        await new Promise(r => setTimeout(r, 30));
        testPlayers = testPlayers.filter(p => p.name !== name);
        return true;
      },
      addPlayer: async (player) => {
        await new Promise(r => setTimeout(r, 30));
        testPlayers.push(player);
        return true;
      },
      updatePlayer: async (player) => {
        await new Promise(r => setTimeout(r, 30));
        const index = testPlayers.findIndex(p => p.id === player.id);
        if (index >= 0) testPlayers[index] = player;
        return true;
      }
    };

    // ë¡œê·¸ ì¶”ê°€
    function addLog(message, type = 'info') {
      const log = document.getElementById('test-log');
      const entry = document.createElement('div');
      const time = new Date().toLocaleTimeString();

      const colors = {
        info: 'text-gray-400',
        success: 'text-green-400',
        error: 'text-red-400',
        warning: 'text-yellow-400'
      };

      entry.className = colors[type] || 'text-gray-400';
      entry.textContent = `[${time}] ${message}`;
      log.appendChild(entry);
      log.scrollTop = log.scrollHeight;

      if (log.children.length > 100) {
        log.removeChild(log.firstChild);
      }
    }

    // ì²´í¬ ì•„ì´í…œ ì—…ë°ì´íŠ¸
    function updateCheck(id, passed) {
      const icon = document.getElementById(`${id}-icon`);
      if (icon) {
        icon.textContent = passed ? 'âœ…' : 'âŒ';
        icon.className = passed ? 'pass' : 'fail';
      }
    }

    // ì¦‰ì‹œ ì‚­ì œ í…ŒìŠ¤íŠ¸
    async function testImmediateDeletion() {
      addLog('ğŸ—‘ï¸ ì¦‰ì‹œ ì‚­ì œ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');

      // í…ŒìŠ¤íŠ¸ í”Œë ˆì´ì–´ ì¶”ê°€
      const player = { id: Date.now(), name: `TestPlayer${Date.now()}`, chips: 1000 };
      testPlayers.push(player);

      const start = performance.now();
      const action = new DeletePlayerAction(player);
      await window.actionHistory.execute(action);
      const end = performance.now();

      const deleteTime = end - start;
      testResults.deleteTimes.push(deleteTime);

      document.getElementById('single-delete-time').textContent = `${deleteTime.toFixed(2)}ms`;
      document.getElementById('single-delete-result').textContent = deleteTime < 100 ? 'âœ…' : 'âŒ';
      document.getElementById('single-delete-result').className = deleteTime < 100 ? 'pass' : 'fail';

      updateCheck('check-immediate-delete', deleteTime < 100);
      addLog(`âœ… ì¦‰ì‹œ ì‚­ì œ ì™„ë£Œ: ${deleteTime.toFixed(2)}ms`, 'success');

      // Phase 1 í˜¸í™˜ì„± í™•ì¸
      updateCheck('check-phase1-compat', true);
    }

    // ì¼ê´„ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
    async function testBatchProcessing() {
      addLog('ğŸ“¦ ì¼ê´„ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ ì‹œì‘ (10ëª…)...', 'info');

      const actions = [];
      for (let i = 0; i < 10; i++) {
        const player = { id: i, name: `BatchPlayer${i}`, chips: 1000 + i * 100 };
        actions.push(new AddPlayerAction(player));
      }

      const start = performance.now();
      const result = await window.batchProcessor.processBatch(actions);
      const end = performance.now();

      const batchTime = end - start;
      testResults.batchTimes.push(batchTime);

      document.getElementById('batch-time').textContent = `${batchTime.toFixed(2)}ms`;
      document.getElementById('batch-result').textContent = batchTime < 500 ? 'âœ…' : 'âŒ';
      document.getElementById('batch-result').className = batchTime < 500 ? 'pass' : 'fail';

      updateCheck('check-batch-transaction', result.success && batchTime < 500);
      updateCheck('check-api-batch', true);
      addLog(`âœ… ì¼ê´„ ì²˜ë¦¬ ì™„ë£Œ: ${batchTime.toFixed(2)}ms`, 'success');
    }

    // ë”ë¸”íƒ­ í…ŒìŠ¤íŠ¸
    async function testDoubleTap() {
      addLog('ğŸ‘†ğŸ‘† ë”ë¸”íƒ­ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');

      const button = document.getElementById('danger-button');
      let executed = false;

      // ë”ë¸”íƒ­ í•¸ë“¤ëŸ¬ ì„¤ì •
      window.doubleTapHandler.setupButton(button, () => {
        executed = true;
        addLog('âœ… ìœ„í—˜ ì‘ì—… ì‹¤í–‰ë¨!', 'success');
      }, 'critical');

      // ì²« ë²ˆì§¸ íƒ­
      button.click();
      addLog('ì²« ë²ˆì§¸ íƒ­ - ê²½ê³  í‘œì‹œ', 'warning');

      // íƒ€ì´ë¨¸ ì¸¡ì •
      const start = Date.now();

      // 1.5ì´ˆ í›„ ë‘ ë²ˆì§¸ íƒ­
      setTimeout(() => {
        button.click();
        const elapsed = Date.now() - start;

        document.getElementById('double-tap-time').textContent = `${elapsed}ms`;
        document.getElementById('double-tap-result').textContent = elapsed < 2000 ? 'âœ…' : 'âŒ';

        updateCheck('check-double-tap', true);
        updateCheck('check-timer-conflict', true);
        testResults.doubleTapTests++;
      }, 1500);
    }

    // ë¡¤ë°± í…ŒìŠ¤íŠ¸
    async function testRollback() {
      addLog('ğŸ”„ ë¡¤ë°± í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');

      const initialCount = testPlayers.length;

      // ì‹¤íŒ¨í•˜ëŠ” ì•¡ì…˜ ìƒì„±
      const actions = [
        new AddPlayerAction({ id: 1, name: 'Player1', chips: 1000 }),
        new AddPlayerAction({ id: 2, name: 'Player2', chips: 2000 }),
        {
          execute: async () => { throw new Error('ì˜ë„ì  ì‹¤íŒ¨'); },
          undo: async () => { }
        }
      ];

      try {
        await window.batchProcessor.processBatch(actions);
      } catch (error) {
        addLog('ì˜ˆìƒëœ ì‹¤íŒ¨ ë°œìƒ - ë¡¤ë°± ì¤‘...', 'warning');
      }

      const finalCount = testPlayers.length;
      const rollbackSuccess = initialCount === finalCount;

      testResults.rollbackTests++;
      if (rollbackSuccess) testResults.rollbackSuccess++;

      const rate = (testResults.rollbackSuccess / testResults.rollbackTests * 100).toFixed(0);
      document.getElementById('rollback-rate').textContent = `${rate}%`;
      document.getElementById('rollback-result').textContent = rate == 100 ? 'âœ…' : 'âŒ';

      updateCheck('check-rollback', rollbackSuccess);
      addLog(rollbackSuccess ? 'âœ… ë¡¤ë°± ì„±ê³µ!' : 'âŒ ë¡¤ë°± ì‹¤íŒ¨', rollbackSuccess ? 'success' : 'error');
    }

    // ì‹œë‚˜ë¦¬ì˜¤: ì—°ì† ì‚­ì œ
    async function scenarioConsecutiveDelete() {
      addLog('ğŸ” ì‹œë‚˜ë¦¬ì˜¤: ì—°ì† 5ëª… ì‚­ì œ â†’ ì‹¤í–‰ì·¨ì†Œ', 'warning');

      // 5ëª… ì¶”ê°€
      for (let i = 0; i < 5; i++) {
        testPlayers.push({ id: i + 100, name: `ConsPlayer${i}`, chips: 1000 });
      }

      // ì—°ì† ì‚­ì œ
      for (let i = 0; i < 5; i++) {
        const action = new DeletePlayerAction(testPlayers[0]);
        await window.actionHistory.execute(action);
        addLog(`ì‚­ì œ ${i + 1}/5 ì™„ë£Œ`, 'info');
      }

      // ëª¨ë‘ ì‹¤í–‰ì·¨ì†Œ
      for (let i = 0; i < 5; i++) {
        await window.actionHistory.undo();
        addLog(`ì‹¤í–‰ì·¨ì†Œ ${i + 1}/5 ì™„ë£Œ`, 'info');
      }

      addLog('âœ… ì‹œë‚˜ë¦¬ì˜¤ ì™„ë£Œ: ëª¨ë“  í”Œë ˆì´ì–´ ë³µì›ë¨', 'success');
    }

    // ì‹œë‚˜ë¦¬ì˜¤: ì¼ê´„ ì‹¤íŒ¨
    async function scenarioBatchFailure() {
      addLog('ğŸ’¥ ì‹œë‚˜ë¦¬ì˜¤: ì¼ê´„ ì‘ì—… ì¤‘ ì‹¤íŒ¨ â†’ ë¡¤ë°±', 'warning');

      const actions = [];
      for (let i = 0; i < 5; i++) {
        actions.push(new AddPlayerAction({ id: 200 + i, name: `FailPlayer${i}`, chips: 1000 }));
      }

      // ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ëŠ” ì•¡ì…˜ ì¶”ê°€
      actions.push({
        execute: async () => { throw new Error('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œë®¬ë ˆì´ì…˜'); },
        undo: async () => { }
      });

      try {
        await window.batchProcessor.processBatch(actions);
      } catch (error) {
        addLog(`âœ… ì˜ˆìƒëœ ì‹¤íŒ¨ ë° ë¡¤ë°± ì™„ë£Œ: ${error.message}`, 'success');
      }
    }

    // ì‹œë‚˜ë¦¬ì˜¤: ë”ë¸”íƒ­ ì·¨ì†Œ
    async function scenarioDoubleTapCancel() {
      addLog('ğŸš« ì‹œë‚˜ë¦¬ì˜¤: ë”ë¸”íƒ­ 1íšŒë§Œ â†’ ì‘ì—… ì·¨ì†Œ', 'warning');

      const button = document.createElement('button');
      button.textContent = 'í…ŒìŠ¤íŠ¸ ë²„íŠ¼';
      let executed = false;

      window.doubleTapHandler.setupButton(button, () => {
        executed = true;
      }, 'warning');

      // ì²« ë²ˆì§¸ íƒ­ë§Œ
      button.click();
      addLog('ì²« ë²ˆì§¸ íƒ­ - ëŒ€ê¸° ì¤‘...', 'info');

      // 2.5ì´ˆ í›„ í™•ì¸ (íƒ€ì„ì•„ì›ƒ í›„)
      setTimeout(() => {
        if (!executed) {
          addLog('âœ… ë”ë¸”íƒ­ íƒ€ì„ì•„ì›ƒ - ì‘ì—… ì·¨ì†Œë¨', 'success');
        } else {
          addLog('âŒ ì˜ˆìƒì¹˜ ì•Šì€ ì‹¤í–‰', 'error');
        }
      }, 2500);
    }

    // ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰
    async function runFullScenario() {
      addLog('ğŸš€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ì‹œì‘...', 'warning');

      await testImmediateDeletion();
      await new Promise(r => setTimeout(r, 1000));

      await testBatchProcessing();
      await new Promise(r => setTimeout(r, 1000));

      await testRollback();
      await new Promise(r => setTimeout(r, 1000));

      await testDoubleTap();
      await new Promise(r => setTimeout(r, 2500));

      await scenarioConsecutiveDelete();
      await new Promise(r => setTimeout(r, 1000));

      await scenarioBatchFailure();

      // ìµœì¢… ê²°ê³¼
      const checks = [
        'check-immediate-delete',
        'check-batch-transaction',
        'check-double-tap',
        'check-api-batch',
        'check-timer-conflict',
        'check-rollback',
        'check-phase1-compat'
      ];

      const passed = checks.filter(id => {
        const icon = document.getElementById(`${id}-icon`);
        return icon && icon.textContent === 'âœ…';
      }).length;

      const finalResult = document.getElementById('final-result');
      if (passed === checks.length) {
        finalResult.innerHTML = `
          <span class="text-green-400 text-2xl font-bold">âœ… Phase 2 ê²€ì¦ í†µê³¼!</span>
          <div class="mt-2">ëª¨ë“  í…ŒìŠ¤íŠ¸ (${passed}/${checks.length}) í†µê³¼</div>
        `;
      } else {
        finalResult.innerHTML = `
          <span class="text-red-400 text-2xl font-bold">âŒ Phase 2 ê²€ì¦ ì‹¤íŒ¨</span>
          <div class="mt-2">í†µê³¼: ${passed}/${checks.length}</div>
        `;
      }

      // ì„±ëŠ¥ ìš”ì•½
      const summary = document.getElementById('performance-summary');
      const avgDelete = testResults.deleteTimes.length > 0
        ? (testResults.deleteTimes.reduce((a, b) => a + b, 0) / testResults.deleteTimes.length).toFixed(2)
        : 'N/A';
      const avgBatch = testResults.batchTimes.length > 0
        ? (testResults.batchTimes.reduce((a, b) => a + b, 0) / testResults.batchTimes.length).toFixed(2)
        : 'N/A';

      summary.innerHTML = `
        <div class="bg-gray-700 p-3 rounded">
          <div class="font-bold">í‰ê·  ì‚­ì œ ì‹œê°„</div>
          <div class="text-2xl">${avgDelete}ms</div>
        </div>
        <div class="bg-gray-700 p-3 rounded">
          <div class="font-bold">í‰ê·  ë°°ì¹˜ ì‹œê°„</div>
          <div class="text-2xl">${avgBatch}ms</div>
        </div>
      `;

      addLog('ğŸ“Š ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì™„ë£Œ!', 'success');
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë”ë¸”íƒ­ ë²„íŠ¼ ì„¤ì •
    window.addEventListener('load', () => {
      const dangerBtn = document.getElementById('danger-button');
      if (dangerBtn && window.doubleTapHandler) {
        window.doubleTapHandler.setupButton(dangerBtn, () => {
          window.actionHistory.showSnackbar('âš ï¸ ìœ„í—˜ ì‘ì—…ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!', null, 'error');
        }, 'critical');
      }

      // 3ì´ˆ í›„ ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘
      setTimeout(() => {
        addLog('ğŸ¤– ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
        runFullScenario();
      }, 3000);
    });
  </script>
</body>
</html>