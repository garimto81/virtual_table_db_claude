<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLAYER í–‰ í˜•ì‹ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: monospace; background: #1a1a1a; color: white; padding: 20px; }
        .test-case { background: #333; border-radius: 8px; padding: 15px; margin: 20px 0; }
        .test-case h3 { color: #fbbf24; margin: 0 0 10px 0; }
        .expected { color: #10b981; }
        .actual { color: #3b82f6; }
        .error { color: #ef4444; }
        .success { color: #10b981; }
        table { border-collapse: collapse; width: 100%; margin: 10px 0; }
        td, th { border: 1px solid #555; padding: 5px; text-align: left; }
        th { background-color: #444; }
        .column-label { background-color: #2d3748; font-weight: bold; }
        button { background: #4b5563; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #6b7280; }
    </style>
</head>
<body>
    <h1>ğŸ¯ PLAYER í–‰ í˜•ì‹ ê²€ì¦</h1>
    
    <div class="test-case">
        <h3>ì˜¬ë°”ë¥¸ í˜•ì‹ (ì˜ˆìƒ)</h3>
        <table>
            <tr class="column-label">
                <td>A</td><td>B</td><td>C</td><td>D</td><td>E</td><td>F</td><td>G</td><td>H</td>
            </tr>
            <tr class="expected">
                <td>4</td>
                <td>PLAYER</td>
                <td>LEMMENS</td>
                <td>1</td>
                <td>0</td>
                <td>575000</td>
                <td>0</td>
                <td>7h 7d</td>
            </tr>
            <tr class="expected">
                <td>5</td>
                <td>PLAYER</td>
                <td>CALONGE</td>
                <td>2</td>
                <td>0</td>
                <td>998000</td>
                <td>358000</td>
                <td>Qh Jh</td>
            </tr>
        </table>
        <p>í˜•ì‹: í–‰ë²ˆí˜¸ | PLAYER | ì´ë¦„ | ì¢Œì„ | 0 | ì‹œì‘ì¹© | ì¢…ë£Œì¹© | í•¸ë“œ</p>
    </div>
    
    <div class="test-case">
        <h3>í˜„ì¬ ìƒì„±ë˜ëŠ” í˜•ì‹ í…ŒìŠ¤íŠ¸</h3>
        <div id="test-output"></div>
    </div>
    
    <button onclick="testPlayerFormat()">PLAYER í–‰ ìƒì„± í…ŒìŠ¤íŠ¸</button>
    <button onclick="testParsePlayer()">PLAYER í–‰ íŒŒì‹± í…ŒìŠ¤íŠ¸</button>
    <button onclick="location.href='index.html'">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    
    <script>
        // í…ŒìŠ¤íŠ¸ìš© í•¨ìˆ˜ë“¤
        function unformatNumber(str) {
            if (!str) return '';
            return String(str).replace(/,/g, '');
        }
        
        function testPlayerFormat() {
            // ìƒì„± í…ŒìŠ¤íŠ¸
            const testPlayers = [
                { name: 'LEMMENS', seat: 1, initialChips: '575000', chips: '0', hand: ['7h', '7d'] },
                { name: 'CALONGE', seat: 2, initialChips: '998000', chips: '358000', hand: ['Qh', 'Jh'] }
            ];
            
            const rows = [];
            testPlayers.forEach(p => {
                let initialChips = parseInt(unformatNumber(p.initialChips) || 0, 10);
                let finalChips = parseInt(unformatNumber(p.chips) || 0, 10);
                // ìˆ˜ì •ëœ í˜•ì‹: PLAYER, name, seat, 0, ì‹œì‘ì¹©, ì¢…ë£Œì¹©, í•¸ë“œ
                rows.push(['PLAYER', p.name, p.seat, 0, initialChips, finalChips, p.hand?.length ? p.hand.join(' ') : '']);
            });
            
            let html = '<table>';
            html += '<tr class="column-label"><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td><td>F</td><td>G</td><td>H</td></tr>';
            
            rows.forEach((row, idx) => {
                html += '<tr class="actual">';
                html += `<td>${idx + 4}</td>`;  // í–‰ ë²ˆí˜¸
                row.forEach((cell, i) => {
                    html += `<td>${cell}</td>`;
                });
                html += '</tr>';
            });
            html += '</table>';
            
            html += '<div style="margin-top: 20px">';
            if(rows[0][4] === 575000 && rows[0][5] === 0 && rows[1][4] === 998000 && rows[1][5] === 358000) {
                html += '<p class="success">âœ… í˜•ì‹ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤!</p>';
                html += '<p>ì¹¼ëŸ¼ E: ì‹œì‘ì¹©, ì¹¼ëŸ¼ F: ì¢…ë£Œì¹© ìœ„ì¹˜ê°€ ì •í™•í•©ë‹ˆë‹¤.</p>';
            } else {
                html += '<p class="error">âŒ í˜•ì‹ ì˜¤ë¥˜ ë°œê²¬</p>';
                html += '<p>í˜„ì¬: E=' + rows[0][4] + ', F=' + rows[0][5] + '</p>';
                html += '<p>ì˜ˆìƒ: E=575000, F=0</p>';
            }
            html += '</div>';
            
            document.getElementById('test-output').innerHTML = html;
        }
        
        function testParsePlayer() {
            // íŒŒì‹± í…ŒìŠ¤íŠ¸
            const testRows = [
                ['4', 'PLAYER', 'LEMMENS', '1', '0', '575000', '0', '7h 7d'],
                ['5', 'PLAYER', 'CALONGE', '2', '0', '998000', '358000', 'Qh Jh']
            ];
            
            const players = [];
            testRows.forEach(row => {
                if(row[1] === 'PLAYER') {
                    const name = row[2];
                    const seat = row[3];
                    // íŒŒì‹±: row[4]ëŠ” 0, row[5]ëŠ” ì‹œì‘ì¹©, row[6]ì€ ì¢…ë£Œì¹©, row[7]ì€ í•¸ë“œ
                    const init = row[5], final = row[6];
                    const cards = (row[7] || '').trim() ? String(row[7]).trim().split(' ') : [];
                    players.push({ name, seat, initialChips: init, finalChips: final, hand: cards });
                }
            });
            
            let html = '<h4>íŒŒì‹± ê²°ê³¼:</h4>';
            html += '<pre style="background: #222; padding: 10px; border-radius: 4px;">';
            html += JSON.stringify(players, null, 2);
            html += '</pre>';
            
            if(players[0].initialChips === '575000' && players[0].finalChips === '0' &&
               players[1].initialChips === '998000' && players[1].finalChips === '358000') {
                html += '<p class="success">âœ… íŒŒì‹±ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•©ë‹ˆë‹¤!</p>';
            } else {
                html += '<p class="error">âŒ íŒŒì‹± ì˜¤ë¥˜</p>';
            }
            
            document.getElementById('test-output').innerHTML = html;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.onload = () => {
            testPlayerFormat();
        };
    </script>
</body>
</html>